<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>L1 - Debugging Incorrect Closure Value Retention</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }

        h1 {
            color: #333;
        }

        pre {
            background: #eee;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }

        .highlight {
            color: red;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h1>L1 - Debugging Incorrect Closure Value Retention</h1>

    <p><strong>Problem Statement:</strong></p>
    <p>
        You are given the following code that is supposed to create a list of functions. Each function should print a
        unique index (<code>0, 1, 2, ...</code>) when called.
        However, instead of printing the correct index, every function prints the same final value.
    </p>

    <p><strong>Your task:</strong></p>
    <ul>
        <li>Investigate why the function list is not printing the correct index.</li>
        <li>Modify the code to ensure that each function prints its corresponding index when invoked.</li>
    </ul>

    <p><strong>Buggy Code:</strong></p>
    <pre><code>function createFunctionList() {
  let functions = [];

  for (var i = 0; i &lt; 5; i++) {
    functions.push(function () {
      console.log("Index:", i);
    });
  }

  return functions;
}

const functionList = createFunctionList();

functionList[0]();    // Expected Output: "Index: 0", <span class="highlight">Actual Output: "Index: 5"</span>
functionList[1]();    // Expected Output: "Index: 1", <span class="highlight">Actual Output: "Index: 5"</span>
functionList[2]();    // Expected Output: "Index: 2", <span class="highlight">Actual Output: "Index: 5"</span>
functionList[3]();    // Expected Output: "Index: 3", <span class="highlight">Actual Output: "Index: 5"</span>
functionList[4]();    // Expected Output: "Index: 4", <span class="highlight">Actual Output: "Index: 5"</span>
</code></pre>

    <p><strong>Hint:</strong> The issue is related to how closures capture variables from the lexical environment.
        Consider the scope of <code>var</code> and how to create a unique scope for each function.</p>
</body>

</html>